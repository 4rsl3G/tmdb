<div id="pjax-page"
     data-title="<%= pageMeta.title %>"
     data-desc="<%= pageMeta.desc %>"
     data-canonical="<%= pageMeta.canonical %>">

  <div class="home-head" data-aos="fade-down">
    <div class="home-title">
      <h1 class="home-h1"><%= homeTitle %></h1>
      <p class="home-sub"><%= homeDesc %></p>
    </div>

    <div class="home-actions">
      <a class="btnx btnx-primary" href="#rail" data-pjax>Explore</a>
      <a class="btnx btnx-ghost" href="#latest" data-pjax>Latest</a>
    </div>
  </div>

  <!-- Poster Rail -->
  <section class="rail" id="rail" data-aos="fade-up">
    <div class="section-head">
      <h2 class="h2">Poster Rail</h2>
      <span class="pill">Swipe / Drag</span>
    </div>

    <div class="poster-rail" id="posterRail" aria-label="Poster rail">
      <% (posts || []).slice(0,18).forEach((p, idx) => { %>
        <a class="poster-card"
           href="/p/<%= p.slug %>" data-pjax
           data-aos="fade-up"
           data-aos-delay="<%= Math.min(220, idx*18) %>">

          <% if (p.poster_url) { %>
            <img loading="lazy" referrerpolicy="no-referrer" src="<%= p.poster_url %>" alt="<%= p.title %> poster"/>
          <% } else { %>
            <div class="poster-fallback">No poster</div>
          <% } %>

          <div class="poster-cap">
            <div class="t"><%= p.title %></div>
            <div class="m">
              <%= p.release_year || "" %>
              <% if (p.vote_average) { %> • ⭐ <%= (p.vote_average||"").toString().slice(0,3) %><% } %>
            </div>
          </div>
        </a>
      <% }) %>
    </div>

    <div class="muted small rail-hint">Drag horizontally • Click a poster to open details</div>
  </section>

  <!-- Latest as poster grid (same style as poster rail) -->
  <div class="section-head mt-3" id="latest" data-aos="fade-right">
    <h2 class="h2">Latest Movies</h2>
    <span class="pill">Tap to open</span>
  </div>

  <section class="poster-grid" data-aos="fade-up">
    <% (posts || []).forEach((p, i) => { %>
      <a class="poster-card poster-card--grid"
         href="/p/<%= p.slug %>" data-pjax
         data-aos="fade-up"
         data-aos-delay="<%= Math.min(220, i*10) %>">

        <% if (p.poster_url) { %>
          <img loading="lazy" referrerpolicy="no-referrer" src="<%= p.poster_url %>" alt="<%= p.title %> poster"/>
        <% } else { %>
          <div class="poster-fallback">No poster</div>
        <% } %>

        <div class="poster-cap">
          <div class="t"><%= p.title %></div>
          <div class="m">
            <%= p.release_year || "" %>
            <% if (p.vote_average) { %> • ⭐ <%= (p.vote_average||"").toString().slice(0,3) %><% } %>
          </div>
        </div>
      </a>
    <% }) %>
  </section>

</div>
